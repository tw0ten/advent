#!/bin/sh
set -e
mkdir -p io/o

ghc src/Main.hs lib/* \
	-outputdir io/o \
	-o io/o/run

cd io

( mkdir -p i
	set -- "session=$(cat i/session)"
	for i in {1..25}; do
		set -- "$1" "i/$i" "https://adventofcode.com/2024/day/$i"
		[ -f "$2" ] ||
			curl -o "$2" \
				-b "$1" "$3/input"
	done )

o/run
